{"version":3,"sources":["date.js","time.js","map.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"map.js","sourcesContent":["function formatDate( rawDate ) {\n\n  var Months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sept',\n    'Oct',\n    'Nov',\n    'Dec',\n  ];\n\n  rawDate = rawDate.split(':');\n\n  var date = { \n    year : rawDate[0], \n    month: rawDate[1], \n    day  : rawDate[2] \n  };\n  \n  var re = /0(\\d)/;\n  \n  if (re.test( date.month ))\n    date.month = date.month.replace(re, '$1');\n  \n  Number(date.month);\n  \n  date.month = Months[ date.month - 1 ];\n  \n  return date.month + ' ' + date.day + ', ' + date.year;\n  \n}","function dumbTime( time ) {\n  \n  this.time   = time;\n  var re      = /(\\d{2}):(\\d{2}):(\\d{2})/,\n      matches = re.exec( this.time );\n  this.hour   = matches[1];\n  this.minute = matches[2];\n  this.second = matches[3];\n  this.amPm   = '';\n  \n  this.formatHour = function() {\n    var re0Test = /0(\\d)/;\n    if ( re0Test.test( this.hour ) ) {\n      this.hour = this.hour.replace(re0Test, \"$1\");\n    }\n    \n    Number(this.hour);\n    \n    if ( this.hour > 12 ) {\n      this.hour = this.hour - 12;\n      this.hour.toString();\n    } else if  ( this.hour == 0 ) {\n      this.hour = 12;\n      this.hour.toString();\n    } else {\n      this.hour.toString();\n    }\n    \n  }\n  \n  this.formatAmPm = function() {\n    if ( matches[1] > 11 ) {\n      this.amPm = \"pm\";\n    } else {\n      this.amPm = \"am\";\n    }\n  }\n  \n  this.getTime = function() {\n    var currentTime = {\n      \n      hour: this.hour,\n      minute: this.minute,\n      second: this.second,\n      amPm: this.amPm\n      \n    };\n    return currentTime;\n  }\n  \n}\n","var map;\nvar alleyPics;\n\nvar shape = {\n    coords: [1, 1, 1, 20, 18, 20, 18, 1],\n    type: 'poly'\n};\n\n$.getJSON(\"/alley\",\n  function(data) {\n    alleyPics = data;  \n    setMarkers(map);       \n});  \n    \nfunction initMap() {\n    var richmondMapType = new google.maps.StyledMapType([\n        {\n            \"featureType\":\"administrative\",\n            \"elementType\":\"labels.text.fill\",\n            \"stylers\":[{ \"color\":\"#444444\" }]\n        },\n        {\n            \"featureType\":\"landscape\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"color\":\"#f2f2f2\" }]\n        },\n        {\n            \"featureType\":\"poi\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"visibility\":\"off\" }]\n        },\n        {\n            \"featureType\":\"road\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"saturation\":-100 }, { \"lightness\":45 }]\n        },\n        {\n            \"featureType\":\"road.highway\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"visibility\":\"simplified\" }]\n        },\n        {\n            \"featureType\":\"road.arterial\",\n            \"elementType\":\"labels.icon\",\n            \"stylers\":[{ \"visibility\":\"off\" }]\n        },\n        { \n            \"featureType\":\"transit\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"visibility\":\"off\" }]\n        },\n        {\n            \"featureType\":\"water\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"color\": \"#ffffff\" }, { \"visibility\":\"on\" }]\n            // #4f595d\n        },\n        {\n            \"name\": \"Richmond Style\" \n        }\n    ]);\n\n    var customMapTypeId = 'richmond_style';\n\n    map = new google.maps.Map(document.getElementById('map'), {\n        center: {lat: 37.558588, lng: -77.476961}, \n        zoom: 14,\n        mapTypeControlOptions: {\n            mapTypeIds: [google.maps.MapTypeId.ROADMAP, customMapTypeId]\n        }\n    });\n\n    map.mapTypes.set(customMapTypeId, richmondMapType);\n    map.setMapTypeId(customMapTypeId);\n\n}\n\nfunction setMarkers(map) {\n  var image = {\n    url: '',\n    size: new google.maps.Size(20, 32),\n    origin: new google.maps.Point(0, 0),\n    anchor: new google.maps.Point(0, 32)\n  };\n  \n  var randomIcon = function() {\n    var random = Math.floor((Math.random() * 10) + 1);\n    return '/images/map_icons/icon' + random + '.png';\n  };\n  \n  var infowindow = new google.maps.InfoWindow();\n\n  for (var i = 0; i < alleyPics.length; i++) {\n    image.url = randomIcon();\n    var pic = alleyPics[i];\n\n    \n    var content = \n      '<div id=\"iw-container\">' +\n        '<img width=\"300px\" src=\"/images/alley_images/' + pic[\"name\"] + '\">' +\n      '</div>'\n    ;\n\n    pic[\"latitude\"] = Number(pic[\"latitude\"]);\n    pic[\"longitude\"] = Number(pic[\"longitude\"]);\n    var marker = new google.maps.Marker({\n      position: {lat: pic[\"latitude\"], lng: pic[\"longitude\"]},\n      map: map,\n      icon: image,\n      shape: shape,\n      id: pic[\"id\"],\n    });\n\n    var previousMarker;\n    google.maps.event.addListener(marker,'click', (function(marker,content,infowindow){ \n        return function() {\n          if (previousMarker) {\n            var reVisited = /active/; \n            var strVisited = previousMarker['icon']['url'];\n            var substVisited = 'visited'; \n \n            image[\"url\"] = strVisited.replace(reVisited, substVisited);\n            previousMarker.setIcon(image);\n          }\n          buildInfoBox(marker[\"id\"]);\n          var reClicked = /((icon\\d\\d?)([^\\.]?)+)/; \n          var strClicked = marker['icon']['url'];\n          var substClicked = '$2-active'; \n          \n          image[\"url\"] = strClicked.replace(reClicked, substClicked);\n          marker.setIcon(image);\n          previousMarker = marker;\n        };\n    })(marker,content,infowindow));\n    var imageHeight = window.innerHeight;\n        imageWidth  = imageHeight * 6 / 4.5;\n\n    function buildInfoBox( id ) {\n      for (var i = alleyPics.length - 1; i >= 0; i--) {\n        if (alleyPics[i][\"id\"] === id) {\n          var currentMarker = alleyPics[i];\n        }\n      };\n\n      var time = new dumbTime( currentMarker[\"time\"] );\n      time.formatHour();\n      time.formatAmPm();\n      var sleepyTime = time.getTime();\n\n      var backgroundImageUrl = '/images/alley_images/' + currentMarker[\"name\"];\n      $('#image-box').css({\n        'height': imageHeight,\n        'width': imageWidth,\n        'background-image': 'url(\"' + backgroundImageUrl + '\")'\n      });\n      $('#image-box').empty().append(\n\n        '<div class=\"image-box-info\">'+\n          '<div class=\"info-subject\">' + currentMarker[\"latitude\"] + '</div>' +\n          '<div class=\"info-subject\">' + currentMarker[\"longitude\"] + '</div>' +\n          '<div class=\"info-subject\">' + formatDate( currentMarker[\"date\"] ) + '</div>' +\n          '<div class=\"info-subject\">' + sleepyTime[\"hour\"]+ ':' + sleepyTime[\"minute\"] + ' ' + sleepyTime[\"amPm\"] + '</div>' +\n        '</div>'\n\n      );\n    }\n  }\n}\n\n$('#image-box').hover(function() {\n    $('.image-box-info').fadeIn(250).css('display', 'flex');\n  }, function() {\n    $('.image-box-info').fadeOut(250);\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"sourceRoot":"/source/"}