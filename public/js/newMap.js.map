{"version":3,"sources":["date.js","time.js","newMap.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"newMap.js","sourcesContent":["function formatDate( rawDate ) {\n\n  var Months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sept',\n    'Oct',\n    'Nov',\n    'Dec',\n  ];\n\n  rawDate = rawDate.split(':');\n\n  var date = { \n    year : rawDate[0], \n    month: rawDate[1], \n    day  : rawDate[2] \n  };\n  \n  var re = /0(\\d)/;\n  \n  if (re.test( date.month ))\n    date.month = date.month.replace(re, '$1');\n  \n  Number(date.month);\n  \n  date.month = Months[ date.month - 1 ];\n  \n  return date.month + ' ' + date.day + ', ' + date.year;\n  \n}","function formatTime( time ) {\n  \n  this.time   = time;\n  var re      = /(\\d{2}):(\\d{2}):(\\d{2})/,\n      matches = re.exec( this.time );\n  this.hour   = matches[1];\n  this.minute = matches[2];\n  this.second = matches[3];\n  this.amPm   = '';\n  \n  this.formatHour = function() {\n    var re0Test = /0(\\d)/;\n    if ( re0Test.test( this.hour ) ) {\n      this.hour = this.hour.replace(re0Test, \"$1\");\n    }\n    \n    Number(this.hour);\n    \n    if ( this.hour > 12 ) {\n      this.hour = this.hour - 12;\n      this.hour.toString();\n    } else if  ( this.hour == 0 ) {\n      this.hour = 12;\n      this.hour.toString();\n    } else {\n      this.hour.toString();\n    }\n    \n  }\n  \n  this.formatAmPm = function() {\n    if ( matches[1] > 11 ) {\n      this.amPm = \"pm\";\n    } else {\n      this.amPm = \"am\";\n    }\n  }\n  \n  this.getTime = function() {\n    var currentTime = {\n      \n      hour: this.hour,\n      minute: this.minute,\n      second: this.second,\n      amPm: this.amPm\n      \n    };\n    return currentTime;\n  }\n  \n}\n","var beaches;\nvar imageHeight = window.innerHeight,\n        imageWidth  = imageHeight * 6 / 4.5,\n        mapWidth    = window.innerWidth - imageWidth;\n\nfunction initMap() {\n  var richmondMapType = new google.maps.StyledMapType([\n        {\n            \"featureType\":\"administrative\",\n            \"elementType\":\"labels.text.fill\",\n            \"stylers\":[{ \"color\":\"#444444\" }]\n        },\n        {\n            \"featureType\":\"landscape\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"color\":\"#f2f2f2\" }]\n        },\n        {\n            \"featureType\":\"poi\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"visibility\":\"off\" }]\n        },\n        {\n            \"featureType\":\"road\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"saturation\":-100 }, { \"lightness\":45 }]\n        },\n        {\n            \"featureType\":\"road.highway\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"visibility\":\"simplified\" }]\n        },\n        {\n            \"featureType\":\"road.arterial\",\n            \"elementType\":\"labels.icon\",\n            \"stylers\":[{ \"visibility\":\"off\" }]\n        },\n        { \n            \"featureType\":\"transit\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"visibility\":\"off\" }]\n        },\n        {\n            \"featureType\":\"water\",\n            \"elementType\":\"all\",\n            \"stylers\":[{ \"color\": \"#ffffff\" }, { \"visibility\":\"on\" }]\n            // #4f595d\n        },\n        {\n            \"name\": \"Richmond Style\" \n        }\n    ]);\n\n    var customMapTypeId = 'richmond_style';\n\n    map = new google.maps.Map(document.getElementById('map'), {\n        center: {lat: 37.586275, lng: -76.947198}, \n        zoom: 10,\n        mapTypeControlOptions: {\n            mapTypeIds: [google.maps.MapTypeId.ROADMAP, customMapTypeId]\n        }\n    });\n\n    map.mapTypes.set(customMapTypeId, richmondMapType);\n    map.setMapTypeId(customMapTypeId);\n  $.getJSON(\"/alley\",\n    function(data) { \n      var infoBoxHeight = window.innerHeight;\n      beaches = data; \n      console.log(beaches);\n      setMarkers(map);\n      $('#map').css({ 'width': mapWidth, 'height': window.innerHeight - 75 + 'px'});\n      $('#infoBox').css({ 'width': mapWidth, 'height': infoBoxHeight - (infoBoxHeight - 50) + 'px'});\n    }\n  );  \n}\n\nfunction setMarkers(map) {\n  var image = {\n    url: '/images/map_icons/mapsMarker-unvisited.png',\n    size: new google.maps.Size(20, 32),\n    origin: new google.maps.Point(0, 0),\n    anchor: new google.maps.Point(0, 32)\n  };\n  var shape = {\n    coords: [1, 1, 1, 20, 18, 20, 18, 1],\n    type: 'poly'\n  };\n  for (var i = 0; i < beaches.length; i++) {\n    image.url = '/images/map_icons/mapsMarker-unvisited.png';\n    var pic = beaches[i];\n\n    pic[\"latitude\"] = Number(pic[\"latitude\"]);\n    pic[\"longitude\"] = Number(pic[\"longitude\"]);\n    var marker = new google.maps.Marker({\n      position: {lat: pic[\"latitude\"], lng: pic[\"longitude\"]},\n      map: map,\n      icon: image,\n      shape: shape,\n      id: pic[\"id\"],\n    });\n\n    var previousMarker;\n    google.maps.event.addListener(marker,'click', (function(marker){ \n        return function() {\n          if (previousMarker) {\n            image[\"url\"] = '/images/map_icons/mapsMarker-current.png';\n            previousMarker.setIcon(image);\n          }\n          buildInfoBox(marker[\"id\"]);\n          image[\"url\"] = '/images/map_icons/mapsMarker-visited.png';\n          marker.setIcon(image);\n          previousMarker = marker;\n        };\n    })(marker));\n    \n    function buildInfoBox( id ) {\n      for (var i = beaches.length - 1; i >= 0; i--) {\n        if (beaches[i][\"id\"] === id) {\n          var currentMarker = beaches[i];\n\n        }\n      };\n      var backgroundImageUrl = '/images/alley_images/' + currentMarker[\"name\"];\n      $('.image--box').css({\n        'height': imageHeight + 'px',\n        'width': imageWidth  + 'px',\n        'background-image': 'url(\"' + backgroundImageUrl + '\")'\n      });\n\n      var time = new formatTime( currentMarker[\"time\"] );\n      time.formatHour();\n      time.formatAmPm();\n      var currentMarkerTime = time.getTime();\n      $(\"#infoBoxDate\").text(formatDate(currentMarker[\"date\"]));\n      $(\"#infoBoxTime\").text(currentMarkerTime[\"hour\"] + ':' + currentMarkerTime[\"minute\"] + ' ' + currentMarkerTime[\"amPm\"]);\n      $(\"#infoBoxLat\").text(currentMarker[\"latitude\"]);\n      $(\"#infoBoxLon\").text(currentMarker[\"longitude\"]);\n    }\n  }\n}\n\nvar imageInfoBoxClosed = true;\n$('#infoBox').on('click', function() {\n  console.log(imageInfoBoxClosed);\n  if (imageInfoBoxClosed) {\n    $('#map').css({'height': window.innerHeight - 200 + 'px'});\n    $('#infoBox').css({'height': window.innerHeight - (window.innerHeight - 175) + 'px'});\n    $('.info--arrow').css({'top': '15%'});\n    $('.info--arrow__left').css({'transform': 'rotate(25deg)'});\n    $('.info--arrow__right').css({'transform': 'rotate(-25deg)'});\n    $('.info--box__info').css({'display': 'flex'});\n    imageInfoBoxClosed = false;\n  } else {\n    $('#map').css({'height': window.innerHeight - 75 + 'px'});\n    $('#infoBox').css({'height': window.innerHeight - (window.innerHeight - 50) + 'px'});\n    $('.info--arrow').css({'top': '50%'});\n    $('.info--arrow__right').css({'transform': 'rotate(25deg)'});\n    $('.info--arrow__left').css({'transform': 'rotate(-25deg)'});\n    $('.info--box__info').css({'display': 'none'});\n    imageInfoBoxClosed = true;\n  }\n});\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"sourceRoot":"/source/"}